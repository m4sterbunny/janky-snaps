import {
  getCompiler
} from "./chunk-WUC7DUXN.mjs";

// src/commands/watch/implementation.ts
import { basename } from "path";
async function watch(config, options) {
  const compiler = await getCompiler(config, {
    evaluate: config.evaluate,
    watch: true,
    spinner: options?.spinner
  });
  return new Promise((resolve, reject) => {
    compiler.watch(
      {
        ignored: [
          "**/node_modules/**/*",
          `**/${basename(config.output.path)}/**/*`
        ]
      },
      (watchError) => {
        if (watchError) {
          reject(watchError);
          return;
        }
        resolve(compiler.watching);
      }
    );
  });
}

export {
  watch
};
//# sourceMappingURL=chunk-BVPROOGE.mjs.map